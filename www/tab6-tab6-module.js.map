{"version":3,"sources":["./src/app/pages/tab6/tab6.module.ts","./src/app/pages/tab6/tab6-routing.module.ts","./src/app/pages/tab6/tab6.page.ts","./src/app/pages/tab6/tab6.page.scss","./src/app/pages/tab6/tab6.page.html"],"names":[],"mappings":"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","file":"tab6-tab6-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { Tab6PageRoutingModule } from './tab6-routing.module';\r\n\r\nimport { Tab6Page } from './tab6.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    Tab6PageRoutingModule\r\n  ],\r\n  declarations: [Tab6Page]\r\n})\r\nexport class Tab6PageModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { Tab6Page } from './tab6.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: Tab6Page\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class Tab6PageRoutingModule {}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { AngularFireAuth } from '../../../../node_modules/@angular/fire/auth'\r\nimport {FirebaseUpdaterAndSetterService} from '../../services/firebase-updater-and-setter.service';\r\nimport {FirebaseObtainerService} from '../../services/firebase-obtainer.service'\r\nimport {DomSanitizer, SafeHtml, SafeResourceUrl, SafeUrl, ɵDomSanitizerImpl} from \"@angular/platform-browser\";\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport {User} from '../../classes/user'\r\n\r\n@Component({\r\n  selector: 'app-tab6',\r\n  templateUrl: './tab6.page.html',\r\n  styleUrls: ['./tab6.page.scss'],\r\n})\r\nexport class Tab6Page implements OnInit {\r\n  @Input() email: string;\r\n  @Input() password: string = undefined;\r\n  @Input() status: string = null;\r\n  @Input() transmitting: string = null;\r\n  @Input() callsign: string = null;\r\n  @Input() country: string = null;\r\n  @Input() preferredFrequency: string = null;\r\n  @Input() transmittingFrequency: string = null;\r\n  myself: User;\r\n  image: File;\r\n  filename: string;\r\n  imageUrl: SafeResourceUrl;\r\n  constructor(private afauth: AngularFireAuth, private sanitizer: ɵDomSanitizerImpl, private firebaseObtainer: FirebaseObtainerService, private firebaseUpdaterAndSetter: FirebaseUpdaterAndSetterService, private firestore: AngularFireStorage) { }\r\n\r\n  ngOnInit() {\r\n    this.afauth.currentUser.then((user) => {\r\n      this.firebaseObtainer.listMyself(user.uid).then((result) => {\r\n        const me = result.val() as unknown as User;\r\n        this.email = me.username;\r\n        this.status = me.status === undefined ? null : me.status;\r\n        this.transmitting = me.transmitting ? \"true\" : \"false\";\r\n        this.callsign = me.callsign === undefined ? null : me.callsign;\r\n        this.country = me.country === undefined ? null : me.country;\r\n        this.preferredFrequency = me.preferredFrequency === undefined ? null : me.preferredFrequency;\r\n        this.firestore.ref(user.uid).getDownloadURL().toPromise().then(data => {\r\n          const urlSan = this.sanitizer.bypassSecurityTrustResourceUrl(data);\r\n          this.imageUrl = urlSan;\r\n        }).catch(err => {})\r\n      });\r\n    })\r\n  }\r\n  onFileSelected(event) {\r\n    this.afauth.currentUser.then((user) => {\r\n    const file: File = event.target.files[0];\r\n    file.arrayBuffer().then((result) => {\r\n      const blob: BlobPart = new Blob([new Uint8Array(result, 0, file.size)]);\r\n      const blobParts: BlobPart[] = [];\r\n      console.log(file);\r\n      blobParts.push(blob);\r\n      let renamedFile = new File(blobParts, user.uid, \r\n        {\r\n          'endings': \"native\",\r\n          'lastModified': file.lastModified,\r\n          'type': file.type\r\n        });\r\n      console.log(renamedFile.name);\r\n      if (renamedFile) {\r\n        this.filename = renamedFile.name;\r\n        this.image = renamedFile;\r\n        const url = URL.createObjectURL(renamedFile);\r\n        console.log(url);\r\n        const urlSan = this.sanitizer.bypassSecurityTrustResourceUrl(url);\r\n        this.imageUrl = urlSan;\r\n        console.log(urlSan);\r\n        console.log(renamedFile);\r\n      }\r\n    });\r\n  });\r\n  }\r\n  public setUser() {\r\n        this.afauth.currentUser.then(res => {\r\n            if (this.password !== undefined && this.password !== \"\") {\r\n              res.updatePassword(this.password);\r\n            }\r\n            let thisuser = new User(this.country, this.preferredFrequency, res.email, this.status === 'undefined' ? null : this.status, this.transmitting === 'yes' ? true : false, res.uid, null,null,this.callsign, this.transmittingFrequency === undefined ? null : this.transmittingFrequency);\r\n            if (this.image === undefined) {\r\n              this.firebaseUpdaterAndSetter.updateUser(thisuser);\r\n            } else {\r\n              this.firebaseUpdaterAndSetter.updateUserAndPhoto(thisuser).then(res => {\r\n                this.firestore.ref('').child(this.image.name).put(this.image).then(() => {\r\n                });\r\n              });\r\n            }\r\n          });\r\n        }\r\n    }\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ0YWI2LnBhZ2Uuc2NzcyJ9 */\";","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>Perfil</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-header collapse=\\\"condense\\\">\\r\\n    <ion-toolbar>\\r\\n      <ion-title size=\\\"large\\\">Perfil</ion-title>\\r\\n    </ion-toolbar>\\r\\n  </ion-header>\\r\\n  <img [src]=\\\"imageUrl\\\" alt=\\\"Your profile picture\\\">\\r\\n  <p>Country</p>\\r\\n  <ion-input [(ngModel)]=\\\"country\\\"></ion-input>\\r\\n  <p>Preferred frequency</p>\\r\\n  <ion-input [(ngModel)]=\\\"preferredFrequency\\\"></ion-input>\\r\\n  <p>Status</p>\\r\\n  <ion-select [(ngModel)]=\\\"status\\\">\\r\\n    <ion-select-option value=\\\"online\\\">Online</ion-select-option>\\r\\n    <ion-select-option value=\\\"offline\\\">Offline</ion-select-option>\\r\\n    <ion-select-option value=\\\"dont\\\">Don't disturb</ion-select-option>\\r\\n  </ion-select>\\r\\n  <p>Transmitting?</p>\\r\\n  <ion-select [(ngModel)]=\\\"transmitting\\\">\\r\\n    <ion-select-option value=\\\"yes\\\">Yes</ion-select-option>\\r\\n    <ion-select-option value=\\\"no\\\">No</ion-select-option>\\r\\n  </ion-select>\\r\\n  <p *ngIf=\\\"transmitting === 'yes'\\\">Frequency of transmission</p>\\r\\n  <ion-input [(ngModel)]=\\\"transmittingFrequency\\\" *ngIf=\\\"transmitting === 'yes'\\\"></ion-input>\\r\\n  <p>Update password</p>\\r\\n  <ion-input type=\\\"password\\\"></ion-input>\\r\\n  <p>Callsign</p>\\r\\n  <ion-input [(ngModel)]=\\\"callsign\\\"></ion-input>\\r\\n  <p>Profile picture</p>\\r\\n  <input type=\\\"file\\\" (change)=\\\"onFileSelected($event)\\\">\\r\\n  <ion-button (click)=\\\"setUser()\\\">Update info</ion-button>\\r\\n</ion-content>\\r\\n\";"],"sourceRoot":"webpack:///"}