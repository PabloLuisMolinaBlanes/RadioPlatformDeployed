{"version":3,"sources":["./src/app/tab6/tab6.page.html","./src/app/tab6/tab6.page.scss","./src/app/tab6/tab6.page.ts","./src/app/tab6/tab6-routing.module.ts","./src/app/tab6/tab6.module.ts"],"names":[],"mappings":"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","file":"tab6-tab6-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Perfil</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-header collapse=\\\"condense\\\">\\n    <ion-toolbar>\\n      <ion-title size=\\\"large\\\">Perfil</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n  <img [src]=\\\"imageUrl\\\">\\n  <p>Country</p>\\n  <ion-input [(ngModel)]=\\\"country\\\"></ion-input>\\n  <p>Preferred frequency</p>\\n  <ion-input [(ngModel)]=\\\"preferredFrequency\\\"></ion-input>\\n  <p>Status</p>\\n  <ion-select [(ngModel)]=\\\"status\\\">\\n    <ion-select-option value=\\\"online\\\">Online</ion-select-option>\\n    <ion-select-option value=\\\"offline\\\">Offline</ion-select-option>\\n    <ion-select-option value=\\\"dont\\\">Don't disturb</ion-select-option>\\n  </ion-select>\\n  <p>Transmitting?</p>\\n  <ion-select [(ngModel)]=\\\"transmitting\\\">\\n    <ion-select-option value=\\\"yes\\\">Yes</ion-select-option>\\n    <ion-select-option value=\\\"no\\\">No</ion-select-option>\\n  </ion-select>\\n  <p *ngIf=\\\"transmitting === 'yes'\\\">Frequency of transmission</p>\\n  <ion-input [(ngModel)]=\\\"transmittingFrequency\\\" *ngIf=\\\"transmitting === 'yes'\\\"></ion-input>\\n  <p>Update password</p>\\n  <ion-input type=\\\"password\\\"></ion-input>\\n  <p>Callsign</p>\\n  <ion-input [(ngModel)]=\\\"callsign\\\"></ion-input>\\n  <p>Profile picture</p>\\n  <input type=\\\"file\\\" (change)=\\\"onFileSelected($event)\\\">\\n  <ion-button (click)=\\\"setUser()\\\">Update info</ion-button>\\n</ion-content>\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ0YWI2LnBhZ2Uuc2NzcyJ9 */\";","import { Component, Input, OnInit } from '@angular/core';\nimport { AngularFireAuth } from '../../../node_modules/@angular/fire/auth'\nimport {FirebaseUpdaterAndSetterService} from '../firebase-updater-and-setter.service';\nimport {FirebaseObtainerService} from '../firebase-obtainer.service'\nimport {DomSanitizer, SafeHtml, SafeResourceUrl, SafeUrl, ɵDomSanitizerImpl} from \"@angular/platform-browser\";\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport {User} from '../user'\n\n@Component({\n  selector: 'app-tab6',\n  templateUrl: './tab6.page.html',\n  styleUrls: ['./tab6.page.scss'],\n})\nexport class Tab6Page implements OnInit {\n  @Input() email: string;\n  @Input() password: string = undefined;\n  @Input() status: string;\n  @Input() transmitting: string;\n  @Input() callsign: string;\n  @Input() country: string;\n  @Input() preferredFrequency: string;\n  @Input() transmittingFrequency: string;\n  myself: User;\n  image: File;\n  filename: string;\n  imageUrl: SafeResourceUrl;\n  constructor(private afauth: AngularFireAuth, private sanitizer: ɵDomSanitizerImpl, private firebaseObtainer: FirebaseObtainerService, private firebaseUpdaterAndSetter: FirebaseUpdaterAndSetterService, private firestore: AngularFireStorage) { }\n\n  ngOnInit() {\n    this.afauth.currentUser.then((user) => {\n      this.firebaseObtainer.listMyself(user.uid).then((result) => {\n        const me = result.val() as unknown as User;\n        this.email = me.username;\n        this.status = me.status;\n        this.transmitting = me.transmitting ? \"true\" : \"false\";\n        this.callsign = me.callsign;\n        this.country = me.country;\n        this.preferredFrequency = me.preferredFrequency;\n        this.firestore.ref(user.uid).getDownloadURL().toPromise().then(data => {\n          const urlSan = this.sanitizer.bypassSecurityTrustResourceUrl(data);\n          this.imageUrl = urlSan;\n        }).catch(err => {})\n      });\n    })\n  }\n  onFileSelected(event) {\n    this.afauth.currentUser.then((user) => {\n    const file: File = event.target.files[0];\n    file.arrayBuffer().then((result) => {\n      const blob: BlobPart = new Blob([new Uint8Array(result, 0, file.size)]);\n      const blobParts: BlobPart[] = [];\n      console.log(file);\n      blobParts.push(blob);\n      let renamedFile = new File(blobParts, user.uid, \n        {\n          'endings': \"native\",\n          'lastModified': file.lastModified,\n          'type': file.type\n        });\n      console.log(renamedFile.name);\n      if (renamedFile) {\n        this.filename = renamedFile.name;\n        this.image = renamedFile;\n        const url = URL.createObjectURL(renamedFile);\n        console.log(url);\n        const urlSan = this.sanitizer.bypassSecurityTrustResourceUrl(url);\n        this.imageUrl = urlSan;\n        console.log(urlSan);\n        console.log(renamedFile);\n      }\n    });\n  });\n  }\n  public setUser() {\n        this.afauth.currentUser.then(res => {\n            if (this.password !== undefined && this.password !== \"\") {\n              res.updatePassword(this.password);\n            }\n            let thisuser = new User(this.country, this.preferredFrequency, res.email, this.status === 'undefined' ? null : this.status, this.transmitting === 'yes' ? true : false, res.uid, null,null,this.callsign, this.transmittingFrequency === undefined ? null : this.transmittingFrequency);\n            if (this.image === undefined) {\n              this.firebaseUpdaterAndSetter.updateUser(thisuser);\n            } else {\n              this.firebaseUpdaterAndSetter.updateUserAndPhoto(thisuser).then(res => {\n                this.firestore.ref('').child(this.image.name).put(this.image).then(() => {\n                });\n              });\n            }\n          });\n        }\n    }\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { Tab6Page } from './tab6.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab6Page\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class Tab6PageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { Tab6PageRoutingModule } from './tab6-routing.module';\n\nimport { Tab6Page } from './tab6.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    Tab6PageRoutingModule\n  ],\n  declarations: [Tab6Page]\n})\nexport class Tab6PageModule {}\n"],"sourceRoot":"webpack:///"}